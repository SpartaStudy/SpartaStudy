# 5강 전송계층 1
- transport layer는 OS 내부 존재
- application layer에서 받은 데이터를 다른 application layer로 전달하는 역할

## 전송 단위
- application layer의 전송 단위 = message
- transport layer의 전송 단위 = segment(header + data)
- network layer의 전송 단위 = packet(header + data)
- message가 transport layer로 내려오면 segment의 data부분에 들어감
- segment가 network layer로 내려오면 packet의 data부분에 들어감

## Internet transport-layer protocol

### TCP
- reliable service
- in-order delivery
- flow control(수신자의 컴퓨터 능력에 맞게 송신자가 송신속도 조절)
- congestion control(네트워크 상황을 고려하여 송신속도 조절)

### UDP
- unreliable service
- unordered delivery
- no handshaking
- (ex) streaming multimedia apps, DNS, SNMP

## Multiplexing / Demultiplexing
- process에서 받은 data가 한 개의 통로로 모여서 계층을 내려감 -> Multiplexing
- data가 계층을 올라가며 여러 process의 socket으로 나눠짐 -> Demultiplexing
- 해당 작업이 transport layer에서 이루어짐(socket interface를 직접적으로 다루기 때문)

### Multiplexing / Demultiplexing 처리과정
- TCP/UDP segment format(32bit 크기)
  - source port(sender)
  - destination port(receiver)
  - other header fields
  - application data(payload)
- 어떤 소켓으로 보낼지는 port 번호를 보고 확인

### UDP의 Demultiplexing
- destination port만 보고 분류함

### TCP의 Demultiplexing
- source IP address, source port, dest IP address, dest port를 보고 분류함
- 위 4개의 정보 중 1개라도 달라진다면 다른 소켓으로 처리함 -> 1대1 맵핑

## UDP: segment header
- source port #
- dest port #
- length
- checksum : 전송 중 data error 여부 판단(error detection: error가 있다면 drop됨)

## principles of reliable data transfer

### Rdt 1.0: Data Transfer over a Perfect Channel
- underlying channel is perfectly reliable
  - no packet errors
  - no packet loss
- What mechanisms do we need for reliable transfer?
  - Nothing, Underlying channel is reliable.

### Rdt 2.0: channel with bit erros (no loss)
- Error detection: Add checksum bits
- Feedback: Acknowledgements(ACKs), Negative acknowledgements(NAKs)
- Retransimission: sender retransmits packet on receipt of NAK